{% extends 'base.html' %}

{% block content %}
	<div class="flex flex-col items-center justify-center h-screen">
        {% if messages %}
			<p class="text-green-500 mb-4">{{ message }}</p>
		{% endif %}
		<form action="{% url 'login' %}" method="post" class="bg-white p-6 w-120 rounded-md shadow-lg ">
			{% if error_message %}
				<p class="text-red-500 mb-4">{{ error_message }}</p>
			{% endif %}
             <h1 class="text-xl text-center bg-green-500 p-5 text-white rounded-md mb-6">Login to Your Account</h1>
			{% csrf_token %}
			<div class="mb-4">
				<label for="username" class="block text-sm font-medium text-gray-700">Username</label>
				<input type="text" name="username" id="username" required class="mt-1 block w-full rounded-md  p-2 border-blue-500 border focus:ring focus:ring-blue-500 focus:ring-opacity-100">
			</div>
			<div class="mb-4">
				<label for="password" class="block text-sm font-medium text-gray-700">Password</label>
				<div class="relative">
					<input type="password" name="password" id="password" required class="mt-1 block w-full p-2 rounded-md border-blue-500 border focus:ring focus:ring-blue-500 focus:ring-opacity-100">
					<button type="button" id="togglePassword" aria-label="Show password" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500">
						<!-- eye (visible when password is hidden) -->
						<svg id="eye" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
						</svg>
						<!-- eye-off (visible when password is shown) -->
						<svg id="eyeOff" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.986 9.986 0 012.223-3.602M6.1 6.1A9.953 9.953 0 0112 5c4.477 0 8.268 2.943 9.542 7a9.99 9.99 0 01-4.166 5.028M3 3l18 18" />
						</svg>
					</button>
				</div>

				<script>
				document.addEventListener('DOMContentLoaded', function() {
					const pwd = document.getElementById('password');
					const toggle = document.getElementById('togglePassword');
					const eye = document.getElementById('eye');
					const eyeOff = document.getElementById('eyeOff');

					toggle.addEventListener('click', function() {
						const isPassword = pwd.getAttribute('type') === 'password';
						pwd.setAttribute('type', isPassword ? 'text' : 'password');
						eye.classList.toggle('hidden', !isPassword);
						eyeOff.classList.toggle('hidden', isPassword);
						toggle.setAttribute('aria-label', isPassword ? 'Hide password' : 'Show password');
					});
				});
				</script>
			</div>
			<div class="flex items-center ">
				<button type="submit" class="bg-green-500 px-4 py-2 cursor-pointer text-white rounded">Login</button>
			</div>
		</form>
	</div>
{% endblock %}
